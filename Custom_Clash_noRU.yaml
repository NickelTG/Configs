# --- –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ---
unified-delay: true
tcp-concurrent: true
global-client-fingerprint: chrome
keep-alive-interval: 1800

# --- –ì–†–£–ü–ü–´ –ü–†–û–ö–°–ò ---
proxy-groups:
  - name: üõ† ALL_SERVERS
    type: select
    use: &all_providers
      - sweden_Soli; lithuania_Soli; estonia_Soli; switzerland_Soli; netherlands_Soli
      - latvia_Force; austria_Force; finland_Force; poland_Force
      - at_danial; be_danial; bg_danial; ch_danial; cz_danial; de_danial; dk_danial; es_danial
      - fi_danial; fr_danial; gb_danial; gr_danial; hu_danial; ie_danial; it_danial; lu_danial
      - lv_danial; md_danial; nl_danial; no_danial; pl_danial; pt_danial; ro_danial; rs_danial; se_danial

  - name: auto
    type: url-test
    url: http://cp.cloudflare.com/generate_204
    interval: 300
    tolerance: 150
    lazy: true
    use: *all_providers

  - name: BALANCE-HASH
    type: load-balance
    url: http://cp.cloudflare.com/generate_204
    interval: 300
    strategy: consistent-hashing
    use: *all_providers

  - name: BALANCE-RR
    type: load-balance
    url: http://cp.cloudflare.com/generate_204
    interval: 300
    strategy: round-robin
    use: *all_providers

  - name: PROXY
    type: select
    proxies:
      - BALANCE-HASH
      - BALANCE-RR
      - auto
      - DIRECT

# --- –ü–†–û–í–ê–ô–î–ï–†–´ –ü–†–û–ö–°–ò ---
common-settings: &common_settings
  type: http
  health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
  override: {udp: true}
  interval: 43200 # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å—Å—ã–ª–æ–∫ —Ä–∞–∑ –≤ 12 —á–∞—Å–æ–≤

proxy-providers:
  # SoliSpirit
  sweden_Soli: { <<: *common_settings, url: "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/Countries/Sweden.txt", path: ./pp/se_soli.yml }
  lithuania_Soli: { <<: *common_settings, url: "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/Countries/Lithuania.txt", path: ./pp/lt_soli.yml }
  estonia_Soli: { <<: *common_settings, url: "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/Countries/Estonia.txt", path: ./pp/ee_soli.yml }
  switzerland_Soli: { <<: *common_settings, url: "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/Countries/Switzerland.txt", path: ./pp/ch_soli.yml }
  netherlands_Soli: { <<: *common_settings, url: "https://raw.githubusercontent.com/SoliSpirit/v2ray-configs/refs/heads/main/Countries/The_Netherlands.txt", path: ./pp/nl_soli.yml }
  
  # F0rc3Run
  latvia_Force: { <<: *common_settings, url: "https://raw.githubusercontent.com/F0rc3Run/F0rc3Run/refs/heads/main/splitted-by-country/Latvia.txt", path: ./pp/lv_force.yml }
  austria_Force: { <<: *common_settings, url: "https://raw.githubusercontent.com/F0rc3Run/F0rc3Run/refs/heads/main/splitted-by-country/Austria.txt", path: ./pp/at_force.yml }
  finland_Force: { <<: *common_settings, url: "https://raw.githubusercontent.com/F0rc3Run/F0rc3Run/refs/heads/main/splitted-by-country/Finland.txt", path: ./pp/fi_force.yml }
  poland_Force: { <<: *common_settings, url: "https://raw.githubusercontent.com/F0rc3Run/F0rc3Run/refs/heads/main/splitted-by-country/Poland.txt", path: ./pp/pl_force.yml }

  # Danialsamadi
  at_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/AT.txt", path: ./pp/at_danial.yml }
  be_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/BE.txt", path: ./pp/be_danial.yml }
  bg_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/BG.txt", path: ./pp/bg_danial.yml }
  ch_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/CH.txt", path: ./pp/ch_danial.yml }
  cz_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/CZ.txt", path: ./pp/cz_danial.yml }
  de_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/DE.txt", path: ./pp/de_danial.yml }
  dk_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/DK.txt", path: ./pp/dk_danial.yml }
  es_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/ES.txt", path: ./pp/es_danial.yml }
  fi_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/FI.txt", path: ./pp/fi_danial.yml }
  fr_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/FR.txt", path: ./pp/fr_danial.yml }
  gb_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/GB.txt", path: ./pp/gb_danial.yml }
  gr_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/GR.txt", path: ./pp/gr_danial.yml }
  hu_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/HU.txt", path: ./pp/hu_danial.yml }
  ie_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/IE.txt", path: ./pp/ie_danial.yml }
  it_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/IT.txt", path: ./pp/it_danial.yml }
  lu_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/LU.txt", path: ./pp/lu_danial.yml }
  lv_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/LV.txt", path: ./pp/lv_danial.yml }
  md_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/MD.txt", path: ./pp/md_danial.yml }
  nl_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/NL.txt", path: ./pp/nl_danial.yml }
  no_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/NO.txt", path: ./pp/no_danial.yml }
  pl_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/PL.txt", path: ./pp/pl_danial.yml }
  pt_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/PT.txt", path: ./pp/pt_danial.yml }
  ro_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/RO.txt", path: ./pp/ro_danial.yml }
  rs_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/RS.txt", path: ./pp/rs_danial.yml }
  se_danial: { <<: *common_settings, url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/SE.txt", path: ./pp/se_danial.yml }

# --- –ü–†–ê–í–ò–õ–ê ---
rule-providers:
  skrepysh-proxy:
    type: http
    behavior: classical
    url: https://github.com/Skrepysh/mihomo-rulesets/raw/refs/heads/main/skrepysh-rulesets/skrepysh-proxy.yaml
    interval: 86400
  ru-bundle:
    type: http
    behavior: domain
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/ru-bundle/rule.yaml
    interval: 86400
  torrent-clients:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/refs/heads/main/other/torrent-clients.yaml'
    interval: 86400
  torrent-trackers:
    type: http
    behavior: domain
    format: mrs
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-trackers.mrs
    interval: 86400

rules:
  - RULE-SET,torrent-clients,DIRECT
  - RULE-SET,torrent-trackers,DIRECT
  - PROCESS-NAME,org.thoughtcrime.securesms,DIRECT
  - PROCESS-NAME,com.badoo.mobile,PROXY
  - PROCESS-NAME,com.bumble.app,PROXY
  - PROCESS-NAME,com.whatsapp,PROXY
  - PROCESS-NAME,ru.fourpda.client,PROXY
  - RULE-SET,skrepysh-proxy,PROXY
  - RULE-SET,ru-bundle,PROXY
  - MATCH,DIRECT
