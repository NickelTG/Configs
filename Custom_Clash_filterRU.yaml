proxy-groups:
  - name: PROXY
    type: select
    proxies:
      - auto
      - fallback
      - DIRECT
    use: &sub_list # –ò—Å–ø–æ–ª—å–∑—É–µ–º —è–∫–æ—Ä—å, —á—Ç–æ–±—ã –Ω–µ –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ 10 —Ä–∞–∑
      - sub_main
      - sub_6
      - sub_22
      - sub_23
      - sub_24
      - sub_eternity

  - name: auto
    type: url-test
    use: *sub_list
    url: http://cp.cloudflare.com/generate_204
    interval: 300
    tolerance: 50
    lazy: true

  - name: fallback
    type: fallback
    use: *sub_list
    url: http://cp.cloudflare.com/generate_204
    interval: 300

proxy-providers:
  # –û–±—â–∏–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –≤—Å–µ—Ö: –±–µ–∑ –†–§ –∏ —Ç–æ–ª—å–∫–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UDP
  sub_main:
    type: http
    url: "https://raw.githubusercontent.com/barry-far/V2ray-config/main/All_Configs_Sub.txt"
    path: ./proxy_providers/sub_main.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_6:
    type: http
    url: "https://github.com/AvenCores/goida-vpn-configs/raw/refs/heads/main/githubmirror/6.txt"
    path: ./proxy_providers/sub_6.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_22:
    type: http
    url: "https://github.com/AvenCores/goida-vpn-configs/raw/refs/heads/main/githubmirror/22.txt"
    path: ./proxy_providers/sub_22.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_23:
    type: http
    url: "https://github.com/AvenCores/goida-vpn-configs/raw/refs/heads/main/githubmirror/23.txt"
    path: ./proxy_providers/sub_23.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_24:
    type: http
    url: "https://github.com/AvenCores/goida-vpn-configs/raw/refs/heads/main/githubmirror/24.txt"
    path: ./proxy_providers/sub_24.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_eternity:
    type: http
    url: "https://raw.githubusercontent.com/mahdibland/ShadowsocksAggregator/master/Eternity.txt"
    path: ./proxy_providers/sub_eternity.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

rule-providers:
  skrepysh-proxy:
    type: http
    behavior: classical
    url: https://github.com/Skrepysh/mihomo-rulesets/raw/refs/heads/main/skrepysh-rulesets/skrepysh-proxy.yaml
    interval: 86400
  ru-bundle:
    type: http
    behavior: domain
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/ru-bundle/rule.yaml
    interval: 86400
  torrent-clients:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/refs/heads/main/other/torrent-clients.yaml'
    interval: 86400
  torrent-trackers:
    type: http
    behavior: domain
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-trackers.mrs
    interval: 86400

rules:
  - RULE-SET,torrent-clients,DIRECT
  - RULE-SET,torrent-trackers,DIRECT
  - PROCESS-NAME,org.thoughtcrime.securesms,DIRECT
  - PROCESS-NAME,com.badoo.mobile,PROXY
  - PROCESS-NAME,com.bumble.app,PROXY
  - PROCESS-NAME,com.whatsapp,PROXY
  - RULE-SET,skrepysh-proxy,PROXY
  - RULE-SET,ru-bundle,PROXY
  - MATCH,DIRECT
