proxy-groups:
  # –û—Å–Ω–æ–≤–Ω–∞—è –≥—Ä—É–ø–ø–∞ –≤—ã–±–æ—Ä–∞
  - name: PROXY
    type: select
    proxies:
      - LOAD-BALANCE  # –¢–µ–ø–µ—Ä—å —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      - auto
      - fallback
      - DIRECT

  # –ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
  - name: LOAD-BALANCE
    type: load-balance
    strategy: round-robin
    use: &sub_list
      - AvenCores_sub_24
      - sub_hans_thomas
      - sub_v2go_de
      - sub_vless_universal
      - sub_proxify_mixed
    url: http://cp.cloudflare.com/generate_204
    interval: 300

  # –ê–≤—Ç–æ-–≤—ã–±–æ—Ä —Å–∞–º–æ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
  - name: auto
    type: url-test
    use: *sub_list
    url: http://cp.cloudflare.com/generate_204
    interval: 300
    tolerance: 50
    lazy: true

  - name: fallback
    type: fallback
    use: *sub_list
    url: http://cp.cloudflare.com/generate_204
    interval: 300

proxy-providers:
  AvenCores_sub_24:
    type: http
    url: "https://github.com/AvenCores/goida-vpn-configs/raw/refs/heads/main/githubmirror/24.txt"
    path: ./proxy_providers/sub_24.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_hans_thomas:
    type: http
    url: "https://raw.githubusercontent.com/hans-thomas/v2ray-subscription/master/servers.txt"
    path: ./proxy_providers/hans_thomas.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_v2go_de:
    type: http
    url: "https://raw.githubusercontent.com/Danialsamadi/v2go/main/Splitted-By-Country/DE.txt"
    path: ./proxy_providers/v2go_de.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_vless_universal:
    type: http
    url: "https://raw.githubusercontent.com/zieng2/wl/main/vless_universal.txt"
    path: ./proxy_providers/vless_universal.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

  sub_proxify_mixed:
    type: http
    url: "https://raw.githubusercontent.com/Firmfox/proxify/main/v2ray_configs/mixed/subscription-1.txt"
    path: ./proxy_providers/proxify_mixed.yml
    interval: 3600
    filter: "(?i)^(?!.*(RU|Russia|–†–æ—Å—Å–∏—è|üá∑üá∫)).*$"
    health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}
    override: {udp: true}

rule-providers:
  skrepysh-proxy:
    type: http
    behavior: classical
    url: https://github.com/Skrepysh/mihomo-rulesets/raw/refs/heads/main/skrepysh-rulesets/skrepysh-proxy.yaml
    interval: 86400
  ru-bundle:
    type: http
    behavior: domain
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/ru-bundle/rule.yaml
    interval: 86400
  torrent-clients:
    type: http
    behavior: classical
    url: 'https://raw.githubusercontent.com/legiz-ru/mihomo-rule-sets/refs/heads/main/other/torrent-clients.yaml'
    interval: 86400
  torrent-trackers:
    type: http
    behavior: domain
    url: https://github.com/legiz-ru/mihomo-rule-sets/raw/main/other/torrent-trackers.mrs
    interval: 86400

rules:
  - RULE-SET,torrent-clients,DIRECT
  - RULE-SET,torrent-trackers,DIRECT
  - PROCESS-NAME,org.thoughtcrime.securesms,DIRECT
  # –≠—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç LOAD-BALANCE —á–µ—Ä–µ–∑ –≥—Ä—É–ø–ø—É PROXY
  - PROCESS-NAME,com.badoo.mobile,PROXY
  - PROCESS-NAME,com.bumble.app,PROXY
  - PROCESS-NAME,com.whatsapp,PROXY
  - PROCESS-NAME,ru.fourpda.client,PROXY
  - RULE-SET,skrepysh-proxy,PROXY
  - RULE-SET,ru-bundle,PROXY
  - MATCH,DIRECT
