profile:
  store-selected: true
  store-fake-ip: false # чтобы кэш не забивался

interface-name: "" # Автоматический выбор интерфейса

transport:
  # Ограничение по времени для сокетов
  dialer-timeout: 30

dns:
  enable: true
  ipv6: false
  enhanced-mode: redir-host # Прямой резолв без подмены IP
  listen: 0.0.0.0:1053

  default-nameserver:
    - system
    - 8.8.8.8

  nameserver:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query    
  
proxy-groups:
  - name: VPN
    type: select
    proxies:
      - DIRECT
      - AUTO
      
  - name: AUTO
    type: url-test
    url: http://connectivity-check.ubuntu.com    
    interval: 1000
    tolerance: 150
    lazy: true
    use: &all_providers     
      - Mah_Eternity     

proxy-providers:    
  Mah_Eternity:
    type: http
    interval: 3600
    url: "https://raw.githubusercontent.com/mahdibland/ShadowsocksAggregator/master/Eternity.txt"
    path: ./proxy_providers/eternity.yml
    health-check:
      enable: true
      interval: 600
      url: http://connectivity-check.ubuntu.com
      concurrency: 5 # ОГРАНИЧЕНИЕ: тестировать только по 5 прокси одновременно
      
rules:
  - GEOSITE,google,DIRECT,no-resolve
  - DOMAIN-SUFFIX,tradingview.com,DIRECT,no-resolve
  - MATCH,VPN
